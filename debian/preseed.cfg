# Preseed configuration file for Debian 12 (Bookworm) installation
# full example: https://preseed.debian.net/debian-preseed/bookworm/amd64-main-full.txt

# Locale settings
d-i debian-installer/locale select en_GB.UTF-8
d-i localechooser/language string en
d-i debian-installer/language string en
d-i debian-installer/country string GB
d-i debconf/language string en
d-i localechooser/languagelist select en
d-i localechooser/preferred-locale select en_GB.UTF-8
d-i localechooser/supported-locales multiselect en_GB.UTF-8

d-i keymap select uk
d-i keyboard-configuration/xkb-keymap select gb
d-i keyboard-configuration/model select pc105
d-i keyboard-configuration/layout select British
d-i keyboard-configuration/variant select 
d-i keyboard-configuration/options select 

d-i debconf/priority select critical
d-i debconf/frontend string noninteractive

# Network settings
d-i netcfg/choose_interface select auto
d-i netcfg/get_hostname string debian-bookworm
d-i netcfg/get_domain string local
d-i netcfg/enable boolean true
d-i netcfg/use_autoconfig boolean true
d-i netcfg/get_nameservers string
d-i netcfg/get_ipaddress string
d-i netcfg/get_netmask string
d-i netcfg/get_gateway string
d-i netcfg/confirm_static boolean true

# Mirror settings
d-i mirror/country string manual
d-i mirror/http/hostname string deb.debian.org
d-i mirror/http/directory string /debian/
d-i mirror/http/proxy string

# Set up LVM for disk partitioning
d-i partman-auto/method string lvm
d-i partman-auto/choose_recipe select atomic
d-i partman-lvm/device_remove_lvm boolean true
d-i partman-lvm/vg_name string vg0
d-i partman-auto/init_automatically_partition select biggest_free
d-i partman-auto/disk string /dev/vda
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true
d-i partman-auto-lvm/guided_size string max
d-i partman-lvm/confirm boolean true
d-i partman-auto/confirm boolean true
d-i partman-auto/confirm_nooverwrite boolean true

# Setting up the root filesystem
d-i partman-basicfilesystems/create_filesystem boolean true
d-i partman-basicfilesystems/confirm boolean true

# User setup
d-i passwd/user-fullname string durosyan
d-i passwd/username string durosyan
d-i passwd/user-password password userp
d-i passwd/user-password-again password userp
d-i user-setup/allow-password-weak boolean true

# Set up root password
d-i passwd/root-password password rootp
d-i passwd/root-password-again password rootp

# Timezone settings
d-i time/zone string Europe/London
d-i clock-setup/utc boolean true
d-i clock-setup/ntp boolean true
d-i clock-setup/ntp-server string 0.debian.pool.ntp.org

# Set up apt repositories (for installing basic packages)
d-i apt-setup/non-free boolean false
d-i apt-setup/contrib boolean false
d-i apt-setup/services-select multiselect security, updates
d-i apt-setup/enable-source-repositories boolean false

# Install additional packages (if desired)
d-i pkgsel/include string openssh-server vim htop curl build-essential
d-i pkgsel/upgrade select none
d-i pkgsel/run_tasksel boolean false
d-i pkgsel/update-policy select none

# Grub settings
d-i grub-installer/only_debian boolean true
d-i grub-installer/bootdev string /dev/vda

d-i popularity-contest/participate boolean false

# Finish installation
# d-i finish-install/reboot_in_progress note

# Automatically reboot after installation is done
d-i debian-installer/exit/halt boolean false
d-i finish-install/keep-consoles boolean true
